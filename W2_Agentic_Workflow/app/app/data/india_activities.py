"""
Curated activities per city â€” used when Google Places API is unavailable or to supplement.
All entries have opening_hours (dict or None), phone, address where applicable.
"""
from __future__ import annotations

from typing import Any

# Per-city list of activities: name, description, category, duration_hours, estimated_price (INR),
# best_time, booking_required, latitude, longitude, opening_hours, phone, address
ACTIVITIES_BY_CITY: dict[str, list[dict[str, Any]]] = {
    "Rishikesh": [
        {
            "name": "White Water Rafting (Ganga)",
            "description": "Rafting on the Ganges from Shivpuri to Rishikesh.",
            "category": "adventure",
            "duration_hours": 3.0,
            "estimated_price": 1500,
            "best_time": "Morning (9 AM)",
            "booking_required": True,
            "latitude": 30.1290,
            "longitude": 78.3934,
            "opening_hours": None,
            "phone": "+91-135-2431783",
            "address": "Shivpuri, Rishikesh, Uttarakhand",
        },
        {
            "name": "Ganga Aarti at Parmarth Niketan",
            "description": "Evening aarti on the banks of the Ganges.",
            "category": "spiritual",
            "duration_hours": 1.0,
            "estimated_price": 0,
            "best_time": "Sunset (6 PM)",
            "booking_required": False,
            "latitude": 30.1022,
            "longitude": 78.2975,
            "opening_hours": {"Daily": "18:00-19:00"},
            "phone": "+91-135-2434303",
            "address": "Parmarth Niketan Ashram, Swarg Ashram, Rishikesh",
        },
        {
            "name": "Bungee Jumping at Jumpin Heights",
            "description": "India's highest bungee jump (83m) at Mohanchatti.",
            "category": "adventure",
            "duration_hours": 2.0,
            "estimated_price": 3995,
            "best_time": "Morning",
            "booking_required": True,
            "latitude": 30.1789,
            "longitude": 78.0987,
            "opening_hours": {"Monday": "09:00-17:00", "Tuesday": "09:00-17:00", "Wednesday": "09:00-17:00", "Thursday": "09:00-17:00", "Friday": "09:00-17:00", "Saturday": "09:00-17:00", "Sunday": "09:00-17:00"},
            "phone": "+91-8130788888",
            "address": "Mohanchatti, Rishikesh-Badrinath Road, Rishikesh",
        },
        {
            "name": "Yoga at The Beatles Ashram",
            "description": "Yoga and meditation at the former Maharishi Mahesh Yogi ashram.",
            "category": "spiritual",
            "duration_hours": 2.0,
            "estimated_price": 500,
            "best_time": "Early morning",
            "booking_required": False,
            "latitude": 30.0989,
            "longitude": 78.2812,
            "opening_hours": {"Monday": "06:00-18:00", "Tuesday": "06:00-18:00", "Wednesday": "06:00-18:00", "Thursday": "06:00-18:00", "Friday": "06:00-18:00", "Saturday": "06:00-18:00", "Sunday": "06:00-18:00"},
            "phone": None,
            "address": "Swarg Ashram, Rishikesh, Uttarakhand",
        },
        {
            "name": "Neelkanth Mahadev Temple",
            "description": "Hilltop temple dedicated to Lord Shiva, 32 km from Rishikesh.",
            "category": "spiritual",
            "duration_hours": 3.0,
            "estimated_price": 0,
            "best_time": "Morning",
            "booking_required": False,
            "latitude": 30.2167,
            "longitude": 78.4333,
            "opening_hours": {"Monday": "06:00-19:00", "Tuesday": "06:00-19:00", "Wednesday": "06:00-19:00", "Thursday": "06:00-19:00", "Friday": "06:00-19:00", "Saturday": "06:00-19:00", "Sunday": "06:00-19:00"},
            "phone": None,
            "address": "Neelkanth, Rishikesh, Uttarakhand",
        },
        {
            "name": "Lakshman Jhula",
            "description": "Iconic suspension bridge over the Ganges; shops and views.",
            "category": "culture",
            "duration_hours": 1.0,
            "estimated_price": 0,
            "best_time": "Morning or evening",
            "booking_required": False,
            "latitude": 30.1156,
            "longitude": 78.2928,
            "opening_hours": None,
            "phone": None,
            "address": "Lakshman Jhula, Rishikesh, Uttarakhand",
        },
        {
            "name": "Flying Fox Zipline",
            "description": "Zipline across the Ganges valley.",
            "category": "adventure",
            "duration_hours": 1.0,
            "estimated_price": 1500,
            "best_time": "Daytime",
            "booking_required": True,
            "latitude": 30.1290,
            "longitude": 78.3934,
            "opening_hours": None,
            "phone": "+91-135-2431783",
            "address": "Shivpuri, Rishikesh",
        },
        {
            "name": "Vashishta Cave",
            "description": "Meditation cave by the Ganges; peaceful spot.",
            "category": "spiritual",
            "duration_hours": 1.0,
            "estimated_price": 0,
            "best_time": "Morning",
            "booking_required": False,
            "latitude": 30.1025,
            "longitude": 78.2980,
            "opening_hours": {"Daily": "06:00-18:00"},
            "phone": None,
            "address": "Swarg Ashram, Rishikesh",
        },
    ],
    "Goa": [
        {
            "name": "Dudhsagar Falls",
            "description": "Four-tier waterfall; can be combined with jeep or trek.",
            "category": "nature",
            "duration_hours": 6.0,
            "estimated_price": 1500,
            "best_time": "Monsoon (Jun-Sep)",
            "booking_required": True,
            "latitude": 15.3142,
            "longitude": 74.3142,
            "opening_hours": {"Daily": "09:00-17:00"},
            "phone": None,
            "address": "Sonaulim, Goa",
        },
        {
            "name": "Fort Aguada",
            "description": "17th-century Portuguese fort with lighthouse and sea views.",
            "category": "culture",
            "duration_hours": 2.0,
            "estimated_price": 0,
            "best_time": "Sunset",
            "booking_required": False,
            "latitude": 15.4922,
            "longitude": 73.7736,
            "opening_hours": {"Monday": "09:30-17:30", "Tuesday": "09:30-17:30", "Wednesday": "09:30-17:30", "Thursday": "09:30-17:30", "Friday": "09:30-17:30", "Saturday": "09:30-17:30", "Sunday": "09:30-17:30"},
            "phone": None,
            "address": "Fort Aguada, Candolim, Goa",
        },
        {
            "name": "Baga Beach",
            "description": "Popular beach with water sports and shacks.",
            "category": "nature",
            "duration_hours": 4.0,
            "estimated_price": 500,
            "best_time": "Morning or evening",
            "booking_required": False,
            "latitude": 15.5533,
            "longitude": 73.7500,
            "opening_hours": None,
            "phone": None,
            "address": "Baga Beach, North Goa",
        },
        {
            "name": "Spice Plantation Tour",
            "description": "Sahakari or similar spice farm with lunch and elephant bath.",
            "category": "culture",
            "duration_hours": 4.0,
            "estimated_price": 1200,
            "best_time": "Morning",
            "booking_required": True,
            "latitude": 15.4500,
            "longitude": 74.0500,
            "opening_hours": {"Daily": "09:00-17:00"},
            "phone": "+91-832-2612333",
            "address": "Ponda, Goa",
        },
        {
            "name": "Dolphin Watching",
            "description": "Boat trip to spot dolphins off Sinquerim/Candolim.",
            "category": "nature",
            "duration_hours": 2.0,
            "estimated_price": 600,
            "best_time": "Early morning",
            "booking_required": True,
            "latitude": 15.5200,
            "longitude": 73.7600,
            "opening_hours": None,
            "phone": None,
            "address": "Sinquerim Beach, Goa",
        },
        {
            "name": "Basilica of Bom Jesus",
            "description": "UNESCO site; holds St Francis Xavier's remains.",
            "category": "culture",
            "duration_hours": 1.5,
            "estimated_price": 0,
            "best_time": "Morning",
            "booking_required": False,
            "latitude": 15.5014,
            "longitude": 73.9117,
            "opening_hours": {"Monday": "09:00-18:30", "Tuesday": "09:00-18:30", "Wednesday": "09:00-18:30", "Thursday": "09:00-18:30", "Friday": "09:00-18:30", "Saturday": "09:00-18:30", "Sunday": "10:30-18:30"},
            "phone": "+91-832-2285790",
            "address": "Old Goa, Goa",
        },
        {
            "name": "Anjuna Flea Market",
            "description": "Wednesday flea market with clothes, handicrafts, food.",
            "category": "shopping",
            "duration_hours": 3.0,
            "estimated_price": 500,
            "best_time": "Wednesday morning",
            "booking_required": False,
            "latitude": 15.5783,
            "longitude": 73.7492,
            "opening_hours": {"Wednesday": "09:00-18:00"},
            "phone": None,
            "address": "Anjuna Beach, North Goa",
        },
        {
            "name": "Water Sports at Calangute",
            "description": "Jet ski, parasailing, banana boat at Calangute Beach.",
            "category": "adventure",
            "duration_hours": 2.0,
            "estimated_price": 2000,
            "best_time": "Morning",
            "booking_required": True,
            "latitude": 15.5433,
            "longitude": 73.7517,
            "opening_hours": None,
            "phone": None,
            "address": "Calangute Beach, North Goa",
        },
    ],
    "Jaipur": [
        {
            "name": "Amber Fort",
            "description": "Hilltop fort with palaces, mirror hall, and elephant rides.",
            "category": "culture",
            "duration_hours": 3.0,
            "estimated_price": 500,
            "best_time": "Morning (opens 8 AM)",
            "booking_required": False,
            "latitude": 26.9855,
            "longitude": 75.8513,
            "opening_hours": {"Monday": "08:00-17:30", "Tuesday": "08:00-17:30", "Wednesday": "08:00-17:30", "Thursday": "08:00-17:30", "Friday": "08:00-17:30", "Saturday": "08:00-17:30", "Sunday": "08:00-17:30"},
            "phone": "+91-141-2530293",
            "address": "Amber, Jaipur, Rajasthan",
        },
        {
            "name": "Hawa Mahal",
            "description": "Palace of Winds; iconic facade with 953 windows.",
            "category": "culture",
            "duration_hours": 1.5,
            "estimated_price": 200,
            "best_time": "Early morning (light)",
            "booking_required": False,
            "latitude": 26.9239,
            "longitude": 75.8267,
            "opening_hours": {"Monday": "09:00-16:30", "Tuesday": "09:00-16:30", "Wednesday": "09:00-16:30", "Thursday": "09:00-16:30", "Friday": "09:00-16:30", "Saturday": "09:00-16:30", "Sunday": "09:00-16:30"},
            "phone": "+91-141-2618862",
            "address": "Hawa Mahal Rd, Jaipur, Rajasthan",
        },
        {
            "name": "City Palace",
            "description": "Royal palace complex with museums and courtyards.",
            "category": "culture",
            "duration_hours": 2.5,
            "estimated_price": 700,
            "best_time": "Morning",
            "booking_required": False,
            "latitude": 26.9258,
            "longitude": 75.8236,
            "opening_hours": {"Monday": "09:30-17:00", "Tuesday": "09:30-17:00", "Wednesday": "09:30-17:00", "Thursday": "09:30-17:00", "Friday": "09:30-17:00", "Saturday": "09:30-17:00", "Sunday": "09:30-17:00"},
            "phone": "+91-141-4088888",
            "address": "City Palace, Jaipur, Rajasthan",
        },
        {
            "name": "Jantar Mantar",
            "description": "UNESCO astronomical observatory with large instruments.",
            "category": "culture",
            "duration_hours": 1.5,
            "estimated_price": 200,
            "best_time": "Morning",
            "booking_required": False,
            "latitude": 26.9247,
            "longitude": 75.8246,
            "opening_hours": {"Monday": "09:00-16:30", "Tuesday": "09:00-16:30", "Wednesday": "09:00-16:30", "Thursday": "09:00-16:30", "Friday": "09:00-16:30", "Saturday": "09:00-16:30", "Sunday": "09:00-16:30"},
            "phone": "+91-141-2610494",
            "address": "Gangori Bazaar, Jaipur, Rajasthan",
        },
        {
            "name": "Nahargarh Fort",
            "description": "Fort with panoramic views; popular at sunset.",
            "category": "culture",
            "duration_hours": 2.0,
            "estimated_price": 200,
            "best_time": "Sunset",
            "booking_required": False,
            "latitude": 26.9375,
            "longitude": 75.8136,
            "opening_hours": {"Monday": "10:00-17:30", "Tuesday": "10:00-17:30", "Wednesday": "10:00-17:30", "Thursday": "10:00-17:30", "Friday": "10:00-17:30", "Saturday": "10:00-17:30", "Sunday": "10:00-17:30"},
            "phone": None,
            "address": "Nahargarh, Jaipur, Rajasthan",
        },
    ],
    "Manali": [
        {
            "name": "Solang Valley",
            "description": "Adventure hub: skiing, paragliding, zorbing.",
            "category": "adventure",
            "duration_hours": 4.0,
            "estimated_price": 2000,
            "best_time": "Morning",
            "booking_required": False,
            "latitude": 32.3078,
            "longitude": 77.1833,
            "opening_hours": None,
            "phone": None,
            "address": "Solang Valley, Manali",
        },
        {
            "name": "Rohtang Pass",
            "description": "High-altitude pass; permit required; open May-Nov.",
            "category": "nature",
            "duration_hours": 8.0,
            "estimated_price": 1500,
            "best_time": "Morning (weather)",
            "booking_required": True,
            "latitude": 32.3744,
            "longitude": 77.2472,
            "opening_hours": None,
            "phone": None,
            "address": "Rohtang Pass, Manali-Leh Highway",
        },
        {
            "name": "Hadimba Temple",
            "description": "Wooden temple in cedar forest; 16th century.",
            "category": "culture",
            "duration_hours": 1.0,
            "estimated_price": 0,
            "best_time": "Morning",
            "booking_required": False,
            "latitude": 32.2578,
            "longitude": 77.1917,
            "opening_hours": {"Daily": "08:00-18:00"},
            "phone": None,
            "address": "Hadimba Temple Rd, Manali",
        },
        {
            "name": "Old Manali Village",
            "description": "Cafes, shops, and laid-back vibe.",
            "category": "culture",
            "duration_hours": 2.0,
            "estimated_price": 500,
            "best_time": "Afternoon",
            "booking_required": False,
            "latitude": 32.2690,
            "longitude": 77.1780,
            "opening_hours": None,
            "phone": None,
            "address": "Old Manali, Himachal Pradesh",
        },
        {
            "name": "Great Himalayan National Park",
            "description": "UNESCO park; trekking and wildlife.",
            "category": "nature",
            "duration_hours": 6.0,
            "estimated_price": 500,
            "best_time": "Day trip",
            "booking_required": True,
            "latitude": 31.7333,
            "longitude": 77.4333,
            "opening_hours": {"Daily": "06:00-18:00"},
            "phone": "+91-1902-265320",
            "address": "Kullu District, Himachal Pradesh",
        },
    ],
    "Varanasi": [
        {
            "name": "Ganga Aarti at Dashashwamedh Ghat",
            "description": "Evening aarti ceremony on the ghats.",
            "category": "spiritual",
            "duration_hours": 1.0,
            "estimated_price": 0,
            "best_time": "Sunset",
            "booking_required": False,
            "latitude": 25.3100,
            "longitude": 83.0111,
            "opening_hours": {"Daily": "18:45-19:30"},
            "phone": None,
            "address": "Dashashwamedh Ghat, Varanasi",
        },
        {
            "name": "Morning Boat Ride on Ganges",
            "description": "Sunrise boat ride along the ghats.",
            "category": "spiritual",
            "duration_hours": 1.5,
            "estimated_price": 300,
            "best_time": "Sunrise",
            "booking_required": False,
            "latitude": 25.3100,
            "longitude": 83.0111,
            "opening_hours": None,
            "phone": None,
            "address": "Assi Ghat / Dashashwamedh, Varanasi",
        },
        {
            "name": "Sarnath",
            "description": "Buddhist site where Buddha gave first sermon; ruins and museum.",
            "category": "culture",
            "duration_hours": 3.0,
            "estimated_price": 500,
            "best_time": "Morning",
            "booking_required": False,
            "latitude": 25.3774,
            "longitude": 83.0250,
            "opening_hours": {"Monday": "09:00-17:00", "Tuesday": "Closed", "Wednesday": "09:00-17:00", "Thursday": "09:00-17:00", "Friday": "09:00-17:00", "Saturday": "09:00-17:00", "Sunday": "09:00-17:00"},
            "phone": "+91-542-2595095",
            "address": "Sarnath, Varanasi, Uttar Pradesh",
        },
        {
            "name": "Kashi Vishwanath Temple",
            "description": "One of the 12 Jyotirlingas; restricted entry (no phones).",
            "category": "spiritual",
            "duration_hours": 1.5,
            "estimated_price": 0,
            "best_time": "Early morning",
            "booking_required": False,
            "latitude": 25.3110,
            "longitude": 82.9870,
            "opening_hours": {"Daily": "03:00-23:00"},
            "phone": None,
            "address": "Vishwanath Gali, Varanasi",
        },
        {
            "name": "Banaras Silk Weaving",
            "description": "Walk through weaver lanes; buy silk sarees.",
            "category": "shopping",
            "duration_hours": 2.0,
            "estimated_price": 0,
            "best_time": "Morning",
            "booking_required": False,
            "latitude": 25.3180,
            "longitude": 82.9750,
            "opening_hours": None,
            "phone": None,
            "address": "Silk weaving areas, Varanasi",
        },
    ],
}


def get_activities(
    city: str,
    interests: list[str] | None = None,
    budget_style: str | None = None,
) -> list[dict[str, Any]]:
    """Return curated activities for the city; optionally filter by interests and budget style."""
    key = city.strip()
    for k, v in ACTIVITIES_BY_CITY.items():
        if k.lower() == key.lower():
            activities = list(v)
            if interests:
                interest_set = {i.lower() for i in interests}
                activities = [
                    a for a in activities
                    if interest_set & {a.get("category", "").lower()}
                ] or activities
            return activities
    return []
